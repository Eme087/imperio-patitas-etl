Productos y servicios
Listar productos, variantes, cantidades, crear productos.

Cómo funciona la interfaz de Bsale, mira éstos videos:

Creación un producto Ver
info
Un producto puede tener 1 o más variantes. Ej, (Nombre Producto) Poleron Blanco, (Nombre Variantes) Talla L, Talla M, Talla S. La variante se debe crear una vez creado el producto. Para vender un producto/variante creado, se debe indicar en el arreglo details del documento.

Estructura JSON
Al realizar una petición HTTP, el servicio retornara un JSON con la siguiente estructura:

Response /v1/products/92.json
{
  "href": "https://api.bsale.io/v1/products/92.json",
  "id": 92,
  "name": null,
  "description": null,
  "classification": 0,
  "ledgerAccount": null,
  "costCenter": null,
  "allowDecimal": 0,
  "stockControl": 1,
  "printDetailPack": 0,
  "state": 99,
  "prestashopProductId": 0,
  "presashopAttributeId": 0,
  "product_type": {
    "href": "https://api.bsale.io/v1/product_types/1.json",
    "id": "1"
  },
  "product_taxes": {
    "href": "https://api.bsale.io/v1/products/92/product_taxes.json"
  }
}

Atributos
Atributo	Descripción	Tipo dato
href	url del producto	String
id	identificador único del producto	Integer
name	nombre del producto	String
description	descripción del producto	String
classification	indica la clase del producto 0 es producto, 1 es servicio y 3 si es un pack o promocion	Integer
ledgerAccount	cuenta contable del producto	String
costCenter	centro de costo del producto	String
allowDecimal	indica si el producto permite trabajar con decimales, ej, productos pesables. No(0) o Si (1)	Boolean
stockControl	indica si el producto controlara stock No(0) o Si (1)	Boolean
printDetailPack	indica si se muestra el detalle del pack No(0) o Si (1)	Boolean
state	estado del producto activo(0) o inactivo (1)	Boolean
prestashopProductId	identificador del producto en prestashop en el caso de existir la integración legacy	
presashopAttributeId	identificador del producto en prestashop en el caso de existir la integración legacy	
product_type	nodo que indica la relación con el tipo de producto	
product_taxes	nodo que indica los impuestos asociados al producto	
GET lista de productos
GET /v1/products.json retornará todos los productos.
Parámetros
limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.
offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.
fields, solo devolver atributos específicos de un recurso
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
name, Permite filtrar por nombre del producto.
ledgeraccount, filtra por cuenta contable de los productos.
costcenter, filtra centro de costo de los productos.
producttypeid, filtra por tipo de producto.
state, boolean (0 o 1) indica si los productos están activos(0) inactivos (1).
Ejemplos
GET /v1/products.json?limit=10&offset=0
GET /v1/products.json?fields=[name,ledgeraccount,description]
GET /v1/products.json?producttypeid=1
GET /v1/products.json?expand=[product_type]
GET /v1/products.json?classification=3
Response /products.json
{
  "href": "https://api.bsale.io/v1/products.json",
  "count": 693,
  "limit": 3,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/products/731.json",
      "id": 731,
      "name": "11% Avalúo Fiscal Depto 515,",
      "description": null,
      "classification": 1,
      "ledgerAccount": "",
      "costCenter": "",
      "allowDecimal": 0,
      "stockControl": 0,
      "printDetailPack": 0,
      "state": 0,
      "prestashopProductId": 0,
      "presashopAttributeId": 0,
      "product_type": {
        "href": "https://api.bsale.io/v1/product_types/1.json",
        "id": "1"
      },
      "product_taxes": {
        "href": "https://api.bsale.io/v1/products/731/product_taxes.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/products/474.json",
      "id": 474,
      "name": "24 clases 3 veces a la semana",
      "description": null,
      "classification": 3,
      "ledgerAccount": "",
      "costCenter": "",
      "allowDecimal": 0,
      "stockControl": 0,
      "printDetailPack": 0,
      "state": 0,
      "prestashopProductId": 0,
      "presashopAttributeId": 0,
      "product_type": {
        "href": "https://api.bsale.io/v1/product_types/1.json",
        "id": "1"
      },
      "product_taxes": {
        "href": "https://api.bsale.io/v1/products/474/product_taxes.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/products/703.json",
      "id": 703,
      "name": "2x1",
      "description": null,
      "classification": 3,
      "ledgerAccount": null,
      "costCenter": null,
      "allowDecimal": 0,
      "stockControl": 0,
      "printDetailPack": 0,
      "state": 0,
      "prestashopProductId": 0,
      "presashopAttributeId": 0,
      "product_type": {
        "href": "https://api.bsale.io/v1/product_types/1.json",
        "id": "1"
      },
      "product_taxes": {
        "href": "https://api.bsale.io/v1/products/703/product_taxes.json"
      }
    }
  ],
  "next": "https://api.bsale.io/v1/products.json?limit=3&offset=3"
}

GET un producto
GET /v1/products/62.json retornará un producto específico.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/products/150.json?expand=[product_type]
Response /products/150.json
{
  "href": "https://api.bsale.io/v1/products/150.json",
  "id": 150,
  "name": "polera",
  "description": "",
  "classification": 0,
  "ledgerAccount": "",
  "costCenter": "",
  "allowDecimal": 0,
  "stockControl": 1,
  "printDetailPack": 0,
  "state": 0,
  "prestashopProductId": 0,
  "presashopAttributeId": 0,
  "product_type": {
    "href": "https://api.bsale.io/v1/product_types/1.json",
    "id": "1"
  },
  "product_taxes": {
    "href": "https://api.bsale.io/v1/products/150/product_taxes.json"
  }
}

GET variantes de un producto
GET /v1/products/62/variants.json retorna las variantes de un producto.
Response /products/:id/variants.json
{
  "href": "https://api.bsale.io/v1/variants.json",
  "count": 3,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/variants/500.json",
      "id": 500,
      "description": "gap",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1351176376",
      "code": "1351176376",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/150.json",
        "id": "150"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/500/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/500/costs.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/499.json",
      "id": 499,
      "description": "L",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1351176361",
      "code": "1351176361",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/150.json",
        "id": "150"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/499/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/499/costs.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/498.json",
      "id": 498,
      "description": "verde",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1351176256",
      "code": "1351176256",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/150.json",
        "id": "150"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/498/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/498/costs.json"
      }
    }
  ]
}

GET impuestos de un producto
GET /v1/products/150/product_taxes.json Retornará impuestos asociados al producto.
Response /products/150/product_taxes.json
{
  "href": "https://api.bsale.io/v1/products/150/product_taxes.json",
  "count": 2,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/products/150/product_taxes/159.json",
      "id": "159",
      "tax": {
        "href": "https://api.bsale.io/v1/taxes/1.json",
        "id": "1"
      }
    }
  ]
}

GET un impuesto de un producto
GET /v1/products/150/product_taxes/159.json Retornará un impuesto asociado al producto.
Response /products/150/product_taxes/159.json
{
  "href": "https://api.bsale.io/v1/products/150/product_taxes/159.json",
  "id": "159",
  "tax": {
    "href": "https://api.bsale.io/v1/taxes/1.json",
    "id": "1"
  }
}

GET cantidad de productos
GET /v1/products/count.json Retornará la cantidad de registros de productos
{
   "count": 53
}

state, boolean (0 o 1) indica si los productos están activos(0) inactivos (1).
POST un producto
POST /v1/products.json
Se debe enviar un Json con la siguiente estructura.

Ejemplo JSON
Envío
{
  "name": "Calcetines",
  "allowDecimal": 0,
  "stockControl": 1,
  "productTypeId": 1
}

name, nombre del producto (String).
description, descripción del producto (String).
classification, indica la clase del producto 0 es producto, 1 es servicio (Integer)
stockControl, indica si el producto controlara stock No(0) o Si (1) (Boolean).
productTypeId, Id del tipo de producto (Integer)
serialNumber, indica si el producto controla o no series. No (0) o Si (1) (Integer)
isLot, indica si la serie se podrá repetir. No (0) o Si (1) (Integer)
taxes, Arreglo que referencia los id's de impuesto asociados al producto.
tip
Si no se definen impuestos en la creación del producto, se asignarán los configurados por defecto en Bsale.

Respuesta
{
  "stockControl": 1,
  "name": "Calcetines",
  "ledgerAccount": "",
  "href": "https://api.bsale.io/v1/products/97.json",
  "prestashopProductId": 0,
  "presashopAttributeId": 0,
  "costCenter": "",
  "printDetailPack": 0,
  "product_type": {
    "href": "https://api.bsale.io/v1/product_types/1.json",
    "id": "1"
  },
  "classification": 1,
  "description": "",
  "id": 97,
  "state": 0,
  "allowDecimal": 0
}

PUT un producto
PUT /v1/products/97.json
Se debe enviar un Json con la siguiente estructura.

Ejemplo JSON
Envío
{
   "id": "97",
   "productTypeId": 10,
   "allowDecimal": 1,
   "name": "Calcetines de Mujer"
}

Respuesta
{
  "stockControl": 1,
  "name": "Calcetines de Mujer",
  "ledgerAccount": "Calcetas",
  "href": "https://api.bsale.io/v1/products/97.json",
  "prestashopProductId": 0,
  "presashopAttributeId": 0,
  "costCenter": "23",
  "printDetailPack": 0,
  "product_type": {
    "href": "https://api.bsale.io/v1/product_types/1.json",
    "id": "1"
  },
  "classification": 1,
  "description": "Multiples colores de calcetines",
  "id": 97,
  "state": 0,
  "allowDecimal": 0
}

POST un Pack
POST /v2/products/pack.json
Se debe enviar un Json con la siguiente estructura.

Ejemplo JSON
Envío
{
    "productTypeId": 1,
    "basePrice": 10000,
    "name": "Pack de ejemplo - api - 5",
    "barCode": "90101001015",
    "code": "90101001015",
    "priceWithTax": 0,
    "printDetailPack": 1,
    "packDetails": [
        {
            "multipleVariant": 0,
            "productPromoId": 0,
            "quantity": 2,
            "variantPromoId": 8901
        }
    ]
}

productTypeId, Id tipo de producto asociado al pack (Integer).
basePrice, Valor base del pack (Integer)
name, descripción del pack (String).
barCode, Código de barra del pack (String).
code, SKU del pack (String)
priceWithTax, Indica si basePrice es un valor bruto. No (0) o Si (1) (Boolean)
printDetailPack, Desea imprimir el detalle del pack en los documentos. No (0) o Si (1) (Boolean)
packDetails.multipleVariant, Pack soportará multiples variantes. No (0) o Si (1) (Boolean)
packDetails.productPromoId, Id producto asociado al pack
packDetails.quantity, Cantidad de producto incluido en el pack
packDetails.variantPromoId, Id variante asociado al pack
tip
Bsale soporta la creación de pack "cerrados" y "abiertos". Los cerrados, son los que se indica la variante y cantidad a utilizar. Los abiertos son aquellos que se les indica solamente el producto, el cual podrá seleccionar las variantes al vender.

Respuesta
{
    "code": "201",
    "data": {
        "id": 2564,
        "name": "Pack de ejemplo - Documentación",
        "classification": 3,
        "printPackDetail": 1,
        "state": 1,
        "productTypeId": 1,
        "brandId": 0,
        "sku": "90101001015",
        "barCode": "90101001015",
        "packDetail": [
            {
                "id": 29,
                "productId": 0,
                "variantId": 8901,
                "quantity": 2,
                "state": 0,
                "packId": 2564,
                "multipleVariant": 0,
                "packInfo": {}
            }
        ]
    }
}

DELETE un producto virtualmente
DELETE /v1/products/97.json Cambia el estado del producto.
danger
El producto no estará visible mediante interfaz y tendrá un state 1

{
  "href": "https://api.bsale.io/v1/products/97.json",
  "id": 97,
  "name": "Calcetines",
  "description": "Multiples colores de calcetines",
  "classification": 1,
  "ledgerAccount": "Calcetas",
  "costCenter": "23",
  "allowDecimal": 0,
  "stockControl": 1,
  "printDetailPack": 0,
  "state": 1,
  "prestashopProductId": 0,
  "presashopAttributeId": 0,
  "product_type": {
    "href": "https://api.bsale.io/v1/product_types/1.json",
    "id": "1"
  }
}

Variantes
Listar variante(s), costos, cantidades, crear, editar y eliminar variantes.

Cómo funciona la interfaz de Bsale, mira éstos videos:

Creación variantes Ver
info
Una variante sólo puede tener 1 producto "padre", pero 1 producto puede tener 1 o más variantes. Ej, (Nombre Producto) Poleron Blanco, (Nombre Variantes) Talla L, Talla M, Talla S.

El producto debe ser creado antes de crear la variante. Para vender un producto/variante creado, se debe indicar en el nodo details del documento.

Estructura JSON
Al realizar una petición HTTP, el servicio retornara un JSON con la siguiente estructura:

Response /variants/2373.json
{
  "href": "https://api.bsale.io/v1/variants/2373.json",
  "id": 2373,
  "description": "240 ML",
  "unlimitedStock": 0,
  "allowNegativeStock": 0,
  "state": 0,
  "barCode": "1441310864",
  "code": "1441310864",
  "imagestionCenterCost": 0,
  "imagestionAccount": 0,
  "imagestionConceptCod": 0,
  "imagestionProyectCod": 0,
  "imagestionCategoryCod": 0,
  "imagestionProductId": 0,
  "serialNumber": 0,
  "prestashopCombinationId": 0,
  "prestashopValueId": 0,
  "product": {
    "href": "https://api.bsale.io/v1/products/656.json",
    "id": "656"
  },
  "attribute_values": {
    "href": "https://api.bsale.io/v1/variants/2373/attribute_values.json"
  },
  "costs": {
    "href": "https://api.bsale.io/v1/variants/2373/costs.json"
  }
}

Atributos
Atributo	Descripción	Tipo dato
href	url del tipo de producto	String
id	identificador único del tipo de producto	Integer
description	nombre de la variante	String
unlimitedStock	indica si la variante posee stock ilimitado No(0) o Si (1)	Boolean
allowNegativeStock	indica si la variante permite stock negativo No(0) o Si (1)	Boolean
state	estado de la variante activo(0) o inactivo (1)	Boolean
barCode	código de barras de la variante	String
code	SKU de la variante	String
imagestionCenterCost	centro de costo imagestion	String
imagestionAccount	cuenta imagestion	String
imagestionConceptCod	concepto imagestion	String
imagestionProyectCod	proyecto imagestion	String
imagestionCategoryCod	categoría imagestion	Integer
imagestionProductId	producto imagestion	Integer
serialNumber	indica si la variante posee numero de serie No(0) Si(1)	Integer
prestashopCombinationId	identificador en prestashop legacy	Integer
prestashopValueId	identificador en prestashop legacy	Integer
product	nodo que indica la relación con el producto	
attribute_values	nodo que indica los valores de los atributos del tipo de producto	
costs	nodo que indica el costo de la variante	
GET lista de variantes
GET /v1/variants.json retornará todos todas las variantes.
Parámetros
limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.
offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.
fields, solo devolver atributos específicos de un recurso
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
description, Permite filtrar por nombre de la variante.
barcode, filtra por código de barra de la variante.
code, filtra por código (SKU) de la variante.
serialnumber, filtra por numero de serie de la variante.
productid, filtra variantes por el id del producto.
state, boolean (0 o 1) indica si las variantes están activas(0) o inactivas (1).
Ejemplos
GET /v1/variants.json?limit=10&offset=0
GET /v1/variants.json?fields=[description,barCode,code]
GET /v1/variants.json?state=0
GET /v1/variants.json?productid=26
GET /v1/variants.json?expand=[product]
Response /variants.json
{
  "href": "https://api.bsale.io/v1/variants.json",
  "count": 868,
  "limit": 3,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/variants/1548.json",
      "id": 1548,
      "description": "120 ML",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1401291513",
      "code": "1401291513",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/416.json",
        "id": "416"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/1548/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/1548/costs.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/1555.json",
      "id": 1555,
      "description": "150 ML",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1400786476",
      "code": "1400786476",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/420.json",
        "id": "420"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/1555/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/1555/costs.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/2101.json",
      "id": 2101,
      "description": "300 ML",
      "unlimitedStock": 0,
      "allowNegativeStock": 0,
      "state": 0,
      "barCode": "1423687401",
      "code": "1423687401",
      "imagestionCenterCost": 0,
      "imagestionAccount": 0,
      "imagestionConceptCod": 0,
      "imagestionProyectCod": 0,
      "imagestionCategoryCod": 0,
      "imagestionProductId": 0,
      "serialNumber": 0,
      "prestashopCombinationId": 0,
      "prestashopValueId": 0,
      "product": {
        "href": "https://api.bsale.io/v1/products/588.json",
        "id": "588"
      },
      "attribute_values": {
        "href": "https://api.bsale.io/v1/variants/2101/attribute_values.json"
      },
      "costs": {
        "href": "https://api.bsale.io/v1/variants/2101/costs.json"
      }
    }
  ],
  "next": "https://api.bsale.io/v1/variants.json?limit=3&offset=3"
}

GET una variante
GET /v1/variants/2373.json retornará una variante específica.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/variants/5730.json?expand=[product]
Response /variants/2373.json
{
  "href": "https://api.bsale.io/v1/variants/2373.json",
  "id": 2373,
  "description": "240 ML",
  "unlimitedStock": 0,
  "allowNegativeStock": 0,
  "state": 0,
  "barCode": "1441310864",
  "code": "1441310864",
  "imagestionCenterCost": 0,
  "imagestionAccount": 0,
  "imagestionConceptCod": 0,
  "imagestionProyectCod": 0,
  "imagestionCategoryCod": 0,
  "imagestionProductId": 0,
  "serialNumber": 0,
  "prestashopCombinationId": 0,
  "prestashopValueId": 0,
  "product": {
    "href": "https://api.bsale.io/v1/products/656.json",
    "id": "656"
  },
  "attribute_values": {
    "href": "https://api.bsale.io/v1/variants/2373/attribute_values.json"
  },
  "costs": {
    "href": "https://api.bsale.io/v1/variants/2373/costs.json"
  }
}

GET cantidad de variantes
GET /v1/variants/count.json Retornará cantidades de registros.

state, boolean (0 o 1) indica si los tipos de productos están activos(0) inactivos (1).

{
   "count": 8001
}

GET valores de atributos de una variante
GET /v1/variants/5730/attribute_values.json retorna la información almacenada en los atributos de una variante.
{
  "href": "https://api.bsale.io/v1/variants/5730/attribute_values.json",
  "count": 4,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/variants/5730/attribute_values/34192.json",
      "id": 34192,
      "description": "Microsoft",
      "attribute": {
        "href": "https://api.bsale.io/v1/product_types/6/attributes/25.json",
        "id": "25"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/5730/attribute_values/34193.json",
      "id": 34193,
      "description": "14-09-2010",
      "attribute": {
        "href": "https://api.bsale.io/v1/product_types/6/attributes/28.json",
        "id": "28"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/5730/attribute_values/34194.json",
      "id": 34194,
      "description": "Multi idiomas (Región Latinoamerica) ",
      "attribute": {
        "href": "https://api.bsale.io/v1/product_types/6/attributes/29.json",
        "id": "29"
      }
    },
    {
      "href": "https://api.bsale.io/v1/variants/5730/attribute_values/34195.json",
      "id": 34195,
      "description": "365 / 24hrs",
      "attribute": {
        "href": "https://api.bsale.io/v1/product_types/6/attributes/24.json",
        "id": "24"
      }
    }
  ]
}

GET un valor de atributo especifico de una variante
GET /v1/variants/531/attribute_values/2.json Retornará un atributo asociados a la variante.
Response /variants/531/attribute_values/2.json
{
  "href": "https://api.bsale.io/v1/variants/531/attribute_values/2.json",
  "id": 2,
  "description": "SI",
  "attribute": {
    "href": "https://api.bsale.io/v1/product_types/8/attributes/12.json",
    "id": "12"
  }
}

GET costo de una variante
GET /v1/variants/2375/costs.json Retornará el costo previamente asignado a la variante.
Response /variants/2375/costs.json
{
  "averageCost": "4140.0",
  "history": [
    {
      "reception_detail": {
        "href": "https://api.bsale.io/v1/stocks/receptions/2539/details/7734.json",
        "id": 7734
      },
      "admissionDate": 1441238400,
      "cost": 4140,
      "availableFifo": 1
    },
    {
      "reception_detail": {
        "href": "https://api.bsale.io/v1/stocks/receptions/2542/details/7744.json",
        "id": 7744
      },
      "admissionDate": 1441324800,
      "cost": 4140,
      "availableFifo": 1
    }
  ]
}

averageCost, costo promedio de una variante (Float).
history, nodo que indica el costo de la variante en cada recepción que ha tenido.
reception_detail, no que indica el detalle de recepción de la variante.
admissionDate, fecha de recepción (Integer).
cost, costo de la variante al momento de la recepción (Float).
availableFifo, cantidad disponible de la variante de una recepción específica (Integer).
POST una variante
POST /v1/variants.json
Para crear una variante, se debe enviar un JSON con la siguiente estructura:

Ejemplo JSON
Envío
{
    "productId": 595,
    "description": "Age of empires II",
    "unlimitedStock": 1,
    "allowNegativeStock" : 1,
    "barCode": "70964507073261",
    "code": "70964507073261"
}

productId, Id del producto (Integer).
description, Nombre de la variante (String)
unlimitedStock, Variante posee stock ilimitado No(0) o Si (1) (Boolean)
allowNegativeStock, Variante permite stock negativo No(0) o Si (1) (Boolean)
barCode, código de barras de la variante (String)
code, SKU de la variante (String)
Atributos (opcional)
Si el tipo de producto al que pertenece la variante posee atributos, se deben enviar los valores que estos van a tener, junto con el id del atributo.

{
  "productId": 595,
  "description": "Age of empires II",
  "attribute_values": [
    {
      "description": "Windows",
      "attributeId": 46
    },
    {
      "description": "Estrategia",
      "attributeId": 47
    }
  ]
}

description, Valor del atributo (String).
attributeId, identificador único del atributo esto viene del tipo de producto (Integer).
Respuesta
{
  "href": "https://api.bsale.io/v1/variants/2110.json",
  "id": 2110,
  "description": "Age of empires II",
  "unlimitedStock": 0,
  "allowNegativeStock": 0,
  "state": 0,
  "barCode": 1415381671,
  "code": 1415381671,
  "imagestionCenterCost": 0,
  "imagestionAccount": 0,
  "imagestionConceptCod": 0,
  "imagestionProyectCod": 0,
  "imagestionCategoryCod": 0,
  "imagestionProductId": 0,
  "serialNumber": 0,
  "prestashopCombinationId": 0,
  "prestashopValueId": 0,
  "product": {
    "href": "https://api.bsale.io/v1/products/595.json",
    "id": "595"
  },
  "attribute_values": {
    "href": "https://api.bsale.io/v1/variants/2110/attribute_values.json"
  }
}

PUT una variante
PUT /v1/variants/2110.json
Se debe enviar un Json con la siguiente estructura:

Ejemplo JSON
Envío
{
  "id": 2110,
  "productId": 595,
  "description": "Age of empires 2",
  "attribute_values": [
    {
      "description": "Windows OS",
      "attributeId": 46
    },
    {
      "description": "Estrategia",
      "attributeId": 47
    }
  ]
}

Respuesta
{
  "href": "https://api.bsale.io/v1/variants/2110.json",
  "id": 2110,
  "description": "Age of empires 2",
  "unlimitedStock": 0,
  "allowNegativeStock": 0,
  "state": 0,
  "barCode": 1415381671,
  "code": 1415381671,
  "imagestionCenterCost": 0,
  "imagestionAccount": 0,
  "imagestionConceptCod": 0,
  "imagestionProyectCod": 0,
  "imagestionCategoryCod": 0,
  "imagestionProductId": 0,
  "serialNumber": 0,
  "prestashopCombinationId": 0,
  "prestashopValueId": 0,
  "product": {
    "href": "https://api.bsale.io/v1/products/595.json",
    "id": "595"
  },
  "attribute_values": {
    "href": "https://api.bsale.io/v1/variants/2110/attribute_values.json"
  }
}

DELETE una variante virtualmente
DELETE /v1/variants/2110.json Cambia el estado de la variante
danger
La variante no estará visible mediante interfaz y tendrá un state 1

{
  "href": "https://api.bsale.io/v1/variants/2110.json",
  "id": 2110,
  "description": "Nintendo Wii U Basic Controller",
  "unlimitedStock": 0,
  "allowNegativeStock": 0,
  "state": 1,
  "barCode": 1415381671,
  "code": 1415381671,
  "imagestionCenterCost": 0,
  "imagestionAccount": 0,
  "imagestionConceptCod": 0,
  "imagestionProyectCod": 0,
  "imagestionCategoryCod": 0,
  "imagestionProductId": 0,
  "serialNumber": 0,
  "prestashopCombinationId": 0,
  "prestashopValueId": 0,
  "product": {
    "href": "https://api.bsale.io/v1/products/595.json",
    "id": "595"
  },
  "attribute_values": {
    "href": "https://api.bsale.io/v1/variants/2110/attribute_values.json"
  }
}

Stocks
Listar, editar y crear stock. Recepción, consumo.

Cómo funciona la interfaz de Bsale, mira éstos videos:

Recepción de stock Ver
Consumo de stock Ver
info
El stock debe ser llamado según la variante, osea su id, o barCode o code.

Estructura JSON
Al realizar una petición HTTP, el servicio retornara un JSON con la siguiente estructura:

Response /stocks/1442.json
{
    "href": "https://api.bsale.io/v1/stocks/1442.json",
    "id": 1442,
    "quantity": 0.0,
    "quantityReserved": 0.0,
    "quantityAvailable": 0.0,
    "variant": {
        "href": "https://api.bsale.io/v1/variants/3960.json",
        "id": "3960"
    },
    "office": {
        "href": "https://api.bsale.io/v1/offices/1.json",
        "id": "1"
    }
}

Atributos
Atributo	Descripción	Tipo dato
quantity	cantidad real de la variante	Float).
quantityReserved	cantidad reservada de la variante en borradores o en documento pendientes de despachar	Float
quantityAvailable	cantidad disponible de la variante	Float
variant	nodo que indica la relación con la variante.	
office	nodo que indica la relación con la sucursal.	
GET lista de stocks
GET /v1/stocks.json retornará todos todos los stocks.
Parámetros
limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.
offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.
fields, solo devolver atributos específicos de un recurso
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
officeid, Permite filtrar por sucursal.
variantid, filtra por el identificador de la variante (Integer)
code, filtra por el SKU de la variante (String).
barcode, filtra por el codigo de barras de la variante (String).
Ejemplos
GET /v1/stocks.json?limit=10&offset=0
GET /v1/stocks.json?variantid=[1223]
GET /v1/stocks.json?code=[892777267]
Response /stocks.json
{
  "href": "https://api.bsale.io/v1/stocks.json",
  "count": 1049,
  "limit": 2,
  "offset": 0,
  "items": [
    {
      "quantity": 60.36,
      "quantityReserved": 0,
      "quantityAvailable": 60.36,
      "variant": {
        "href": "https://api.bsale.io/v1/variants/351.json",
        "id": "351"
      },
      "office": {
        "href": "https://api.bsale.io/v1/offices/2.json",
        "id": "2"
      }
    },
    {
      "quantity": 0,
      "quantityReserved": 0,
      "quantityAvailable": 0,
      "variant": {
        "href": "https://api.bsale.io/v1/variants/351.json",
        "id": "351"
      },
      "office": {
        "href": "https://api.bsale.io/v1/offices/1.json",
        "id": "1"
      }
    }
  ]
}

GET un stock de variante
GET /v1/stocks/44977.json retornará un stock específico.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/stocks/44977.json?expand=[variant,office]
GET /v1/stocks/44977.json?officeid=2
Response /stocks/44977.json
{
    "href": "https://api.bsale.io/v1/stocks/44977.json",
    "id": 44977,
    "quantity": 4.0,
    "quantityReserved": 0.0,
    "quantityAvailable": 4.0,
    "variant": {
        "href": "https://api.bsale.io/v1/variants/18855.json",
        "id": "18855"
    },
    "office": {
        "href": "https://api.bsale.io/v1/offices/2.json",
        "id": "2"
    }
}

tip
En el caso de necesitar el stock de un pack, se debe filtrar por un identificador (variantid, code, barcode) y además la sucursal requerida officeid. El stock de los packs solo considera el stock físico, lo que quiere decir que no contempla las cantidades por despachar.

GET recepciones de stock
GET /v1/stocks/receptions.json retornará todos las recepciones..

limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.

offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.

fields, solo devolver atributos específicos de un recurso

expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.

admissiondate, Permite filtrar por la fecha de la recepción.

documentnumber, filtra por el numero del documento de la recepción.

officeid, Permite filtrar por sucursal.

Ejemplos
GET /v1/stocks/receptions.json?limit=3&offset=0
GET /v1/stocks/receptions.json?fields=[admissiondate,document,documentnumber]
GET /v1/stocks/receptions.json?expand=[office,details]
{
    "href": "https://api.bsale.io/v1/stocks/receptions.json",
    "count": 126,
    "limit": 3,
    "offset": 0,
    "items": [
        {
            "href": "https://api.bsale.io/v1/stocks/receptions/487.json",
            "id": 487,
            "admissionDate": 1583712000,
            "document": "Sin Documento",
            "documentNumber": "",
            "note": "Ajuste de Stock: Soporte  bsale",
            "imagestionCctId": 0,
            "imagestionCcDescription": "",
            "internalDispatchId": 0,
            "updateStock": 1,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/1.json",
                "id": "1"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/receptions/487/details.json"
            }
        },
        {
            "href": "https://api.bsale.io/v1/stocks/receptions/492.json",
            "id": 492,
            "admissionDate": 1584921600,
            "document": "Guía",
            "documentNumber": "123",
            "note": "prueba api",
            "imagestionCctId": 0,
            "imagestionCcDescription": null,
            "internalDispatchId": 0,
            "updateStock": 0,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/2.json",
                "id": "2"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/receptions/492/details.json"
            }
        },
        {
            "href": "https://api.bsale.io/v1/stocks/receptions/493.json",
            "id": 493,
            "admissionDate": 1584921600,
            "document": "Factura",
            "documentNumber": "",
            "note": "Recepcion / Soporte  bsale",
            "imagestionCctId": 0,
            "imagestionCcDescription": "",
            "internalDispatchId": 0,
            "updateStock": 0,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/1.json",
                "id": "1"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/receptions/493/details.json"
            }
        }
    ],
    "next": "https://api.bsale.io/v1/stocks/receptions.json?limit=3&offset=3"
}

GET una recepción
GET /v1/stocks/receptions/12.json retornará una recepción específica.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/stocks/receptions/12.json?expand=details
{
    "href": "https://api.bsale.io/v1/stocks/receptions/487.json",
    "id": 487,
    "admissionDate": 1583712000,
    "document": "Sin Documento",
    "documentNumber": "",
    "note": "Ajuste de Stock: Vendedor local",
    "imagestionCctId": 0,
    "imagestionCcDescription": "",
    "internalDispatchId": 0,
    "updateStock": 1,
    "office": {
        "href": "https://api.bsale.io/v1/offices/1.json",
        "id": "1"
    },
    "user": {
        "href": "https://api.bsale.io/v1/users/1.json",
        "id": "1"
    },
    "details": {
        "href": "https://api.bsale.io/v1/stocks/receptions/487/details.json"
    }
}

GET detalles de una recepción
GET /v1/stocks/receptions/12/details.json retornará detalles de una recepción específica.
{
  "href": "https://api.bsale.io/v1/stocks/receptions/12/details.json",
  "count": 13,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/stocks/receptions/12/details/65.json",
      "id": 65,
      "quantity": 32.02,
      "cost": 3200,
      "variantStock": 85.55,
      "serialNumber": null,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/391.json",
        "id": "391"
      }
    },
    {
      "href": "https://api.bsale.io/v1/stocks/receptions/12/details/66.json",
      "id": 66,
      "quantity": 32.22,
      "cost": 3200,
      "variantStock": 185.2,
      "serialNumber": null,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/388.json",
        "id": "388"
      }
    },
    {
      "href": "https://api.bsale.io/v1/stocks/receptions/12/details/67.json",
      "id": 67,
      "quantity": 14.46,
      "cost": 3200,
      "variantStock": 107.84,
      "serialNumber": null,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/393.json",
        "id": "393"
      }
    }
  ]
}

GET un de detalle de una recepción
GET /v1/stocks/receptions/12/details/65.json retornará un detalle de una recepción específica.
{
  "href": "https://api.bsale.io/v1/stocks/receptions/12/details/65.json",
  "id": 65,
  "quantity": 32.02,
  "cost": 3200,
  "variantStock": 85.55,
  "serialNumber": null,
  "variant": {
    "href": "https://api.bsale.io/v1/variant/391.json",
    "id": "391"
  }
}

POST una recepción de stock
POST /v1/stocks/receptions.json
Para crear una recepción (ingresar cantidades de stock), se debe enviar un JSON con la siguiente estructura:

Ejemplo JSON
Envío
{
  "document": "Guía",
  "officeId": 1,
  "documentNumber": "123",
  "note": "prueba api",
  "details": [
    {
      "quantity": 32.22,
      "code": 629,
      "cost": 3200
    }
  ]
}

document, nombre del tipo de documento de ingreso, se visualiza en la interfaz de Bsale (String).
"GUÍA", "FACTURA", "OTRO".
officeId, Id de la sucursal donde se ingresa el stock (Integer).
note, comentario de ingreso, se visualiza en la interfaz de Bsale (String).
documentNumber, número de documento de ingreso (Integer)
quantity, cantidad ingreso de stock
cost, costo asociado al ingreso
info
En caso de generar una recepción de stock de un producto que tiene serie, se debe agregar serialNumber (String) con su valor.

tip
Para el ingreso de stock, se puede referenciar al producto mediante id, o barCode o code.

Respuesta
{
  "admissionDate": 1407297600,
  "imagestionCcDescription": null,
  "href": "https://api.bsale.io/v1/stocks/receptions/831.json",
  "id": 831,
  "details": {
    "href": "https://api.bsale.io/v1/stocks/receptions/831/details.json"
  },
  "document": "Guía",
  "documentNumber": 123,
  "office": {
    "href": "https://api.bsale.io/v1/offices/1.json",
    "id": "1"
  },
  "imagestionCctId": 0,
  "note": "prueba api",
  "internalDispatchId": 0
}

PUT una recepción de stock
PUT /v1/stocks/receptions/831.json
Se debe enviar un Json con la siguiente estructura:

Ejemplo JSON
Envío
{
  "document": "Guía",
  "officeId": 2,
  "documentNumber": "123",
  "note": "Prueba de ingreso vía api",
  "details": [
    {
      "quantity": 27,
      "variantId": 629,
      "cost": 2970
    }
  ]
}

Respuesta
{
  "admissionDate": 1407297600,
  "imagestionCcDescription": null,
  "href": "https://api.bsale.io/v1/stocks/receptions/831.json",
  "id": 831,
  "details": {
    "href": "https://api.bsale.io/v1/stocks/receptions/831/details.json"
  },
  "document": "Guía",
  "documentNumber": 123,
  "office": {
    "href": "https://api.bsale.io/v1/offices/1.json",
    "id": "1"
  },
  "imagestionCctId": 0,
  "note": "prueba api",
  "internalDispatchId": 0
}

GET consumos de stock
GET /v1/stocks/consumptions.json retornará los consumos.
Parámetros
limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.
offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.
fields, solo devolver atributos específicos de un recurso.
expand, permite expandir instancias y colecciones.
consumptiondate, Permite filtrar por la fecha del consumo.
officeid, Permite filtrar por sucursal.
Ejemplos
GET /v1/stocks/consumptions.json?limit=3&offset=0
GET /v1/stocks/consumptions.json?fields=[consumptiondate,note]
GET /v1/stocks/consumptions.json?expand=[details]
{
    "href": "https://api.bsale.io/v1/stocks/consumptions.json",
    "count": 9,
    "limit": 3,
    "offset": 0,
    "items": [
        {
            "href": "https://api.bsale.io/v1/stocks/consumptions/1.json",
            "id": 1,
            "consumptionDate": 1600646400,
            "note": "a",
            "imagestionCcdescription": "",
            "imagestionCenterCostId": 0,
            "updateStock": 0,
            "consumptionTypeId": 1,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/1.json",
                "id": "1"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/consumptions/1/details.json"
            }
        },
        {
            "href": "https://api.bsale.io/v1/stocks/consumptions/2.json",
            "id": 2,
            "consumptionDate": 1615334400,
            "note": "Inventory: Soporte  bsale",
            "imagestionCcdescription": "",
            "imagestionCenterCostId": 0,
            "updateStock": 0,
            "consumptionTypeId": 1,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/1.json",
                "id": "1"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/consumptions/2/details.json"
            }
        },
        {
            "href": "https://api.bsale.io/v1/stocks/consumptions/3.json",
            "id": 3,
            "consumptionDate": 1620864000,
            "note": "Ajuste de Stock: Soporte  bsale",
            "imagestionCcdescription": "",
            "imagestionCenterCostId": 0,
            "updateStock": 1,
            "consumptionTypeId": 1,
            "office": {
                "href": "https://api.bsale.io/v1/offices/1.json",
                "id": "1"
            },
            "user": {
                "href": "https://api.bsale.io/v1/users/1.json",
                "id": "1"
            },
            "details": {
                "href": "https://api.bsale.io/v1/stocks/consumptions/3/details.json"
            }
        }
    ],
    "next": "https://api.bsale.io/v1/stocks/consumptions.json?limit=3&offset=3"
}

GET un consumo
GET /v1/stocks/consumptions/1.json retornará un consumo específico.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/stocks/consumptions/8.json?expand=details
{
    "href": "https://api.bsale.io/v1/stocks/consumptions/8.json",
    "id": 8,
    "consumptionDate": 1664841600,
    "note": "Ajuste de Stock: Inventario",
    "imagestionCcdescription": "",
    "imagestionCenterCostId": 0,
    "updateStock": 1,
    "consumptionTypeId": 1,
    "office": {
        "href": "https://api.bsale.io/v1/offices/1.json",
        "id": "1"
    },
    "user": {
        "href": "https://api.bsale.io/v1/users/1.json",
        "id": "1"
    },
    "details": {
        "href": "https://api.bsale.io/v1/stocks/consumptions/8/details.json"
    }
}

GET detalles de un consumo
GET /v1/stocks/consumptions/1/details.json retornará detalles de un consumo específico.
{
  "href": "https://api.bsale.io/v1/stocks/consumptions/1/details.json",
  "count": 2,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/stocks/consumptions/1/details/1.json",
      "id": 1,
      "quantity": 36.78,
      "cost": 3200,
      "variantStock": 42.2,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/355.json",
        "id": "355"
      }
    },
    {
      "href": "https://api.bsale.io/v1/stocks/consumptions/2/details/2.json",
      "id": 2,
      "quantity": 78.64,
      "cost": 1311.08850457782,
      "variantStock": 106.56,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/388.json",
        "id": "388"
      }
    }
  ]
}

GET un de detalle de un consumo
GET /v1/stocks/consumptions/1/details/1.json retornará un detalle de un consumo específica.
{
  "href": "https://api.bsale.io/v1/stocks/consumptions/1/details/1.json",
  "id": 1,
  "quantity": 36.78,
  "cost": 3200,
  "variantStock": 42.2,
  "variant": {
    "href": "https://api.bsale.io/v1/variant/355.json",
    "id": "355"
  }
}

GET tipos de consumos
GET /v1/stock_consumption_types.json retornará los tipos de consumos creados.
note
Es posible solicitar la creación de nuevos tipos de consumo, a ayuda@bsale.app

Ejemplos
GET /v1/stock_consumption_types.json
{
    "href": "https://api.bsale.io/v1/stock_consumption_types.json",
    "count": 10,
    "limit": 25,
    "offset": 0,
    "items": [
        {
            "cntId": 1,
            "cntI18nName": "consumption_type.retiro",
            "cntActive": 1,
            "cntCode": "12"
        },
        {
            "cntId": 2,
            "cntI18nName": "consumption_type.mermas",
            "cntActive": 1,
            "cntCode": "13"
        },
        {
            "cntId": 3,
            "cntI18nName": "consumption_type.desmedro",
            "cntActive": 1,
            "cntCode": "14"
        },
        {
            "cntId": 4,
            "cntI18nName": "consumption_type.destruccion",
            "cntActive": 1,
            "cntCode": "15"
        },
        {
            "cntId": 5,
            "cntI18nName": "Eventos internos",
            "cntActive": 1,
            "cntCode": "16"
        }
    ]
}

POST un consumo de stock
POST /v1/stocks/consumptions.json
Para crear un consumo (restar cantidades de stock), se debe enviar un JSON con la siguiente estructura:

Ejemplo JSON
Envío
{
  "note": "prueba de consumo api",
  "officeId": 1,
  "details": [
    {
      "quantity": 13,
      "variantId": 629
    }
  ]
}

officeId, Id de la sucursal donde se ingresa el stock (Integer).
note, comentario de ingreso, se visualiza en la interfaz de Bsale (String).
documentNumber, número de documento de ingreso (Integer)
quantity, cantidad ingreso de stock
info
En caso de generar un consumo de stock de un producto que tiene serie, se debe agregar serialNumber(String) con su valor.

tip
Para el consumo de stock, se puede referenciar al producto mediante id, o barCode o code.

Respuesta
{
  "office": {
    "id": "1",
    "href": "https://api.bsale.io/v1/offices/1.json"
  },
  "imagestionCenterCostId": null,
  "details": {
    "href": "https://api.bsale.io/v1/stocks/consumptions/593/details.json"
  },
  "note": "prueba api",
  "consumptionDate": 1407297600,
  "imagestionCcdescription": null,
  "id": 593,
  "href": "https://api.bsale.io/v1/stocks/consumptions/593.json"
}

Listas de precios
Listar y editar detalles de las listas de precio en Bsale.

Cómo funciona la interfaz de Bsale, mira éstos videos:

Creación listas de precios Ver
info
Bsale gestiona 1 o más listas de precio. (Ej Lista de precios temporada, lista distribuidores, lista por mayor, etc). Pueden ser concebidas con distintos tipos de moneda (dolar, franco, uf, etc)

Para usar las lista de precio creadas, referenciar priceListId en el envío del documento.

Estructura JSON
Al realizar una petición HTTP, el servicio retornara un JSON con la siguiente estructura:

Response /price_lists/3.json
{
  "href": "https://api.bsale.io/v1/price_lists/3.json",
  "id": "3",
  "name": "LISTA USD",
  "description": null,
  "state": 0,
  "coin": {
    "href": "https://api.bsale.io/v1/coins/3.json",
    "id": "3"
  },
  "details": {
    "href": "https://api.bsale.io/v1/price_lists/3/details.json"
  }
}

Atributos
Atributo	Descripción	Tipo dato
href	url del recurso	String
id	identificador único recurso	Integer
name	nombre de la lista de precio	String
state	estado de la lista de precio indica si esta activo(0) o inactivo (1)	Boolean
coin	nodo que indica la moneda que utiliza la lista de precio.	
details	nodo que indica los detalles de la lista de precio.	
GET listas de precio
GET /v1/price_lists.json retornará todas las listas de precio.
Parámetros
limit, limita la cantidad de items de una respuesta JSON, por defecto el limit es 25, el máximo permitido es 50.
offset, permite paginar los items de una respuesta JSON, por defecto el offset es 0.
fields, solo devolver atributos específicos de un recurso
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
name, Permite filtrar por nombre de la lista de precio.
coinid, filtra por la moneda.
state, boolean (0 o 1) indica si las listas de precio están activas(0) inactivas (1).
Ejemplos
GET /v1/price_lists.json?limit=10&offset=0
GET /v1/price_lists.json?fields=[name,description,state]
GET /v1/price_lists.json?coinid=1
GET /v1/price_lists.json?expand=[coin,details]
Response /price_lists.json
{
  "href": "https://api.bsale.io/v1/price_lists.json",
  "count": 3,
  "limit": 25,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/price_lists/1.json",
      "id": "1",
      "name": "Lista Base",
      "description": "",
      "state": 0,
      "coin": {
        "href": "https://api.bsale.io/v1/coins/1.json",
        "id": "1"
      },
      "details": {
        "href": "https://api.bsale.io/v1/price_lists/1/details.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/price_lists/2.json",
      "id": "2",
      "name": "Lista UF",
      "description": "",
      "state": 0,
      "coin": {
        "href": "https://api.bsale.io/v1/coins/2.json",
        "id": "2"
      },
      "details": {
        "href": "https://api.bsale.io/v1/price_lists/2/details.json"
      }
    },
    {
      "href": "https://api.bsale.io/v1/price_lists/3.json",
      "id": "3",
      "name": "LISTA USD",
      "description": null,
      "state": 0,
      "coin": {
        "href": "https://api.bsale.io/v1/coins/3.json",
        "id": "3"
      },
      "details": {
        "href": "https://api.bsale.io/v1/price_lists/3/details.json"
      }
    }
  ]
}

GET una lista de precio
GET /v1/price_lists/3.json retornará una lista de precio específica.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
Ejemplos
GET /v1/price_lists/3.json?expand=[details,coin]
Response /price_lists/3.json
{
  "href": "https://api.bsale.io/v1/price_lists/3.json",
  "id": "3",
  "name": "LISTA USD",
  "description": null,
  "state": 0,
  "coin": {
    "href": "https://api.bsale.io/v1/coins/3.json",
    "id": "3"
  },
  "details": {
    "href": "https://api.bsale.io/v1/price_lists/3/details.json"
  }
}

GET cantidad de listas de precio
GET /v1/price_lists/count.json Retornará cantidades de registros.

state, boolean (0 o 1) indica si los tipos de productos están activos(0) inactivos (1).

{
   "count": 3
}

GET detalles de una lista de precio
GET /v1/price_lists/1/details.json retorna el detalle de la lista de precio, acá se indica el valor de la variante.
Parámetros
expand, permite expandir instancias y colecciones para traer relaciones en una sola petición.
variantid, filtra por el identificador de la variante (Integer)
code, filtra por el SKU de la variante (String).
barcode, filtra por el código de barras de la variante (String).
Ejemplos
GET /v1/price_lists/1/details.json?expand=[variant]
GET /v1/price_lists/1/details.json?variantid=149
GET /v1/price_lists/1/details.json?code=12345
GET /v1/price_lists/1/details.json?barcode=45412431
Response /price_lists/1/details.json
{
  "href": "https://api.bsale.io/v1/price_lists/1/details.json",
  "count": 7634,
  "limit": 4,
  "offset": 0,
  "items": [
    {
      "href": "https://api.bsale.io/v1/price_lists/1/details/663.json",
      "id": 663,
      "variantValue": 4590,
      "variantValueWithTaxes": 5462,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/388.json",
        "id": "388"
      }
    },
    {
      "href": "https://api.bsale.io/v1/price_lists/1/details/681.json",
      "id": 681,
      "variantValue": 25000.23,
      "variantValueWithTaxes": 29750,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/407.json",
        "id": "407"
      }
    },
    {
      "href": "https://api.bsale.io/v1/price_lists/1/details/683.json",
      "id": 683,
      "variantValue": 10000,
      "variantValueWithTaxes": 11900,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/426.json",
        "id": "426"
      }
    },
    {
      "href": "https://api.bsale.io/v1/price_lists/1/details/689.json",
      "id": 689,
      "variantValue": 10000,
      "variantValueWithTaxes": 11900,
      "variant": {
        "href": "https://api.bsale.io/v1/variant/460.json",
        "id": "460"
      }
    }
  ],
  "next": "https://api.bsale.io/v1/price_lists/1/details.json?limit=4&offset=4"
}

href, url del detalle de la lista de precio (String).
id, identificador único del detalle (Integer).
variantValue, Valor neto de la variante (Float).
variantValueWithTaxes, Valor con impuestos de la variante (Float).
variant, nodo que indica la variante relacionada con el detalle de la lista de precio.
GET un detalle de una lista de precio
GET /v1/price_lists/3/details/663.json Retornará un detalle.
Response /price_lists/1/details/663.json
{
  "href": "https://api.bsale.io/v1/price_lists/1/details/663.json",
  "id": 663,
  "variantValue": 4590,
  "variantValueWithTaxes": 5462,
  "variant": {
    "href": "https://api.bsale.io/v1/variant/388.json",
    "id": "388"
  }
}

note
NO existe un POST de lista de precio, debido a que las listas de precios comparten el total de productos de Bsale. Y sólo se puede editar sus valores, con el verbo PUT

PUT un detalle de una lista de precio
info
El id (1412 en el ejemplo) que se debe agregar pertenece al id de detalle de Lista de precio. El 19 de la url, corresponde al id de la lista de precio que se está editando.

PUT /v1/price_lists/19/details/1412.json Se debe enviar un Json con la siguiente estructura:
Ejemplo JSON
Envío
{
   "variantValue": 2000,
   "id": 1412
}

Respuesta
{
  "href": "https://api.bsale.io/v1/price_lists/19/details/1412.json",
  "variantValue": 2000,
  "variantValueWithTaxes": 2380,
  "variant": {
    "href": "https://api.bsale.io/v1/variant/351.json",
    "id": "351"
  },
  "id": 1412
}